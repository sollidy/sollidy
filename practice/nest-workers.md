## Проблема

1. Тяжелая асинхронная функция, выполняющаяся в коде блокирует eventLoop. Микросервис на Nest.js обменивается сообщениями с RabbitMQ (heartBeat), и таким образом Rabbit проверяет что процесс жив. При зависшем процессе, Rabbit дисконнектится, вываливается в ошибку.

2. У RabbitMQ есть параметр - `consumer_timeout` - время между тем как сервер принял сообщение и отправил `ack`. По умолчанию 30 минут. Если процесс продолжается больше 30 минут, Rabbit дисконнектится и процесс завершается ошибкой.

## Решение

1. Функцию, нагружающую процессор, выносим в отдельный thread с помощью библиотеки `piscina`. После этого основной процесс не теряет connection с rabbitMq

2. Для того, чтобы процесс не падал от дисконнекта, добавляем асинхронный (в промисе) таймаут на 29 минут и возвращаем ошибку. Обе асинхронные операции оборачиваем в Promice.race() и когда проходит 29 минут, возвращается ошибка, которую ловит catch, процесс не падает.
